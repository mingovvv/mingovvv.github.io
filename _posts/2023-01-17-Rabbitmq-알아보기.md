---
title: Rabbitmq 알아보기
author: mingo
date: 2023-09-13 03:22:00 +0900
categories: [rabbitmq]
tags: [rabbitmq]
---

----

## rabbitmq란
> RabbitMQ is the most widely deployed open source message broker.

위의 rabbitmq 공식페이지에서 나오는 소개 문구의 핵심은 "rabbitmq는 메시지 브로커"라는 것이다.
좀 더 자세히 알아보면 "rabbitmq는 메시지 지향 미들웨어의 한 종류로, 메시지를 주고받는 애플리케이션 간의 통신을 지원하는 소프트웨어" 이다. 
또한 rabbitmq는 AMQP(Advanced Message Queuing Protocol)라는 표준 프로토콜을 구현하고 있으며, 다양한 언어와 플랫폼에서 사용할 수 있다.

## rabbitmq 구성
rabbitmq의 구성은 크게 두 가지로 나눌 수 있습니다. 하나는 브로커(broker)이고, 다른 하나는 클라이언트(client)입니다.

브로커는 메시지를 전달하는 중앙 서버 역할을 하며, rabbitmq에서는 노드(node)라고 부릅니다. 노드는 하나 이상의 큐(queue)를 가지고 있으며, 큐는 메시지를 저장하는 버퍼 역할을 합니다. 노드는 클러스터(cluster)라는 단위로 묶여서 작동할 수 있으며, 이 경우 각 노드가 동일한 메타데이터를 공유하고, 서로의 상태를 모니터링합니다. 클러스터를 구성하면 높은 가용성과 확장성을 얻을 수 있습니다.

클라이언트는 브로커와 통신하는 애플리케이션으로, rabbitmq에서는 프로듀서(producer)와 컨슈머(consumer)라고 부릅니다. 프로듀서는 메시지를 생성하고, 브로커에게 전송합니다. 컨슈머는 브로커로부터 메시지를 수신하고, 처리합니다. 프로듀서와 컨슈머는 직접적으로 통신하지 않고, 브로커를 통해 간접적으로 통신합니다. 이렇게 하면 애플리케이션 간의 결합도를 낮추고, 유연하고 안정적인 통신을 구현할 수 있습니다.

## Exchange
rabbitmq에서는 메시지를 전달하는 방식에 따라 다양한 교환기(exchange) 타입을 제공합니다. 교환기는 프로듀서가 보낸 메시지를 적절한 큐에 분배하는 역할을 합니다. 교환기 타입에는 다음과 같은 것들이 있습니다.

- direct: 메시지에 지정된 라우팅 키(routing key)와 동일한 키를 가진 큐에만 메시지를 전달합니다.
- fanout: 메시지를 연결된 모든 큐에 복사하여 전달합니다.
- topic: 메시지에 지정된 라우팅 키와 패턴이 일치하는 큐에만 메시지를 전달합니다.
- headers: 메시지의 헤더 정보와 일치하는 큐에만 메시지를 전달합니다.

이 외에도 rabbitmq에서는 다양한 기능과 옵션을 제공하여, 복잡하고 다양한 시나리오에 맞게 메시징 솔루션을 구축할 수 있습니다. 예를 들어, TTL(time to live), DLX(dead letter exchange), RPC(remote procedure call), priority queue, message acknowledgment 등이 있습니다.

rabbitmq는 강력하고 유연한 메시징 솔루션으로, 분산 시스템에서 데이터의 신뢰성과 일관성을 보장하며, 성능과 확장성을 향상시킬 수 있습니다. 이 글에서는 rabbitmq가 무엇이고 구성은 어떤식인지에 대해 간략하게 소개했으며, 자세한 내용은 공식 문서를 참고하시기 바랍니다.
