---
title: 쿠버네티스 Pod 오브젝트 살펴보기
author: mingo
date: 2024-01-04 00:30:00 +0900
categories: [Kubernetes]
tags: [pod]
---

-----------------

## Pod LifeCycle
![1.png](/assets/img/post/202401/1.png){: .border .center-image w="600" h="800" }
_Pod와 Container의 라이프사이클_

### 1. Pending Status
![2.png](/assets/img/post/202401/2.png){: .border .center-image w="800" h="400" }
Pod의 최초 상태는 `Pending` 상태이며, 
본 컨테이너가 기동되기 전에 Volume이나 보안 설정 등 초기화 시켜야하는 내용을 추가할 수 있는 `initContainer` 가 실행된다. 
(`initContainer`는 Pod 명세 안에 initContainers 항목으로 초기화 스크립트를 작성할 수 있다.) 
initContainer는 본 컨테이너보다 먼저 실행되고 성공적으로 초기화 작업이 종료되면 이어서 생성될 Pod가 어떤 Node에 할당될 지 결정하는 Pod Scheduling 작업이 수행된다. 
Node 결정 후에는 컨테이너의 이미지를 다운로드를 진행한다. 이때 컨테이너는 waiting:ContainerCreating 상태이다.

### 2. Running Status
![3.png](/assets/img/post/202401/3.png){: .border .center-image w="800" h="400" }
본격적으로 컨테이너가 기동되면서 Pod와 Container의 상태는 `Running`으로 변경된다. 
만약 일부 컨테이너가 문제가 생겨 재시작되면 컨테이너의 상태는 waiting:CrashLoopBackOff가 된다. 
이 경우, Pod는 Container의 재시작과 관계없이 Running 상태를 유지하지만 내부 컨디션의 `ContainerReady`와 `Ready` 필드는 false가 된다.

> Pod 상태가 Running 이여도 내부 Container 상태에 문제가 있을 수 있으므로 내부 컨테이너 상태도 주목할 필요가 있다.
{: .prompt-warning }

Job이나 CronJob으로 생성된 Pod의 경우 자신의 일을 마치게 되면 Failed 또는 Succeeded 상태로 귀결된다.
참고로 둘 중 어느것이던지 Pod의 ContainerReady와 Ready는 false로 변경된다.

### 3-1 Failed Status
작업을 하고 있는 컨테이너 중에 하나라도 문제가 발생하면 Pod의 상태는 Failed가 된다.
또한 Pending Status에서 Failed Status로 빠지는 케이스도 있다.

### 3-2 Succeeded Status
작업을 하고 있는 컨테이너가 모두 작업을 Completed 하였을 경우 Pod의 상태는 Succeeded된다.

### 3-3 Unknown Status
Running Status 중에 통신 장애가 발생하면 Unknown Status로 변경된다.

-----------------

## Prove

### Readinessprobe

### Livenessprobe

-----------------

## QOS

-----------------

## Node Scheduling

> source
- <https://www.inflearn.com/course/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EA%B8%B0%EC%B4%88/>
- <https://kubernetes.io/ko/docs/concepts/overview/working-with-objects/kubernetes-objects/>
